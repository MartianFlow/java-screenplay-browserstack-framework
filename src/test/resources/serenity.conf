serenity {
    encoding = "UTF-8"
    compress.filenames = true
    take.screenshots = AFTER_EACH_STEP
}

environment = remote

environments {
    local {
        webdriver {
            local_chrome {
                driver = chrome
                autodownload = true
                capabilities {
                    "goog:chromeOptions" {
                        args = ["remote-allow-origins=*"]
                    }
                }
            }

            local_firefox {
                driver = firefox
                autodownload = true
                capabilities {
                    "moz:firefoxOptions" {
                        args = ["-private"]
                        prefs {
                            "browser.tabs.documentchannel.ppdc": false
                            "browser.tab.animated": false
                            "network.dns.disablePrefetch": true
                            // Otras preferencias de Firefox
                        }
                    }
                }
            }

            local_edge {
                driver = edge
                autodownload = true
            }
        }
    }

    remote {
        webdriver {
            remote {
                driver = remote
            }
        }
        browserstack {
            active = true
        }
        webdriver {
            driver = "remote"
            capabilities {
                buildName = "EYS_ValDispositivos"
                buildTag = "EYS"
                projectName = "Squad EYS"
                "bstack:options" {
                    os = "Windows"
                    osVersion = "11"
                    resolution = "1920x1200"
                    seleniumVersion = "4.1.2"
                    video = true
                    geoLocation = "CO"
                }
            }
        }
    }

}

environments {
    default = local.local_chrome
}